
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>st-flash Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="newuser_pio.html" />
    
    
    <link rel="prev" href="gcc-arm-none-eabi_latest_install_md.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="dfu-util_latest_install_md.html">
            
                <a href="dfu-util_latest_install_md.html">
            
                    
                    dfu-util
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="gcc-arm-none-eabi_latest_install_md.html">
            
                <a href="gcc-arm-none-eabi_latest_install_md.html">
            
                    
                    gcc-arm-none-eabi
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.3" data-path="st-flash_latest_install_md.html">
            
                <a href="st-flash_latest_install_md.html">
            
                    
                    st-flash
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="newuser_pio.html">
            
                <a href="newuser_pio.html">
            
                    
                    newuser_pio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="platformio_iini_arduino_md.html">
            
                <a href="platformio_iini_arduino_md.html">
            
                    
                    platformio.ini for arduino
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="SSD_benchmark.html">
            
                <a href="SSD_benchmark.html">
            
                    
                    SSD benchmark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="mp_cpy_Performance_Test_md.html">
            
                <a href="mp_cpy_Performance_Test_md.html">
            
                    
                    MicroPython/CircuitPython Performance Test
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="X11Carbon_linux_install.html">
            
                <a href="X11Carbon_linux_install.html">
            
                    
                    ThikPad X1 Carbon Install
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="ADSL2opt_md.html">
            
                <a href="ADSL2opt_md.html">
            
                    
                    ADSL2opt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="pio_Wio-Terminal_nixie-NTP_V2_md.html">
            
                <a href="pio_Wio-Terminal_nixie-NTP_V2_md.html">
            
                    
                    Wio-Terminal_nixie-NTP_V2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="LovyanGFX_sketch_pio.html">
            
                <a href="LovyanGFX_sketch_pio.html">
            
                    
                    LovyanGFX_sketch_pio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="M5CAMERA_CameraWebServer_md.html">
            
                <a href="M5CAMERA_CameraWebServer_md.html">
            
                    
                    M5CAMERA_CameraWebServer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="M5Core2_Arduino_install_md.html">
            
                <a href="M5Core2_Arduino_install_md.html">
            
                    
                    M5Core2_Arduino_install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="WiFiAnalyzer_WIOT_M5C2_md.html">
            
                <a href="WiFiAnalyzer_WIOT_M5C2_md.html">
            
                    
                    WiFiAnalyzer on Wi-Terminal/N5Core2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="M5Stack_uncannyEyes_md.html">
            
                <a href="M5Stack_uncannyEyes_md.html">
            
                    
                    M5Stack uncannyEyes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="Wio_ExtFlashLoad_pio_md.html">
            
                <a href="Wio_ExtFlashLoad_pio_md.html">
            
                    
                    Wio_ExtFlashLoad_pio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9" data-path="MP_F767ZI_network_samples_md.html">
            
                <a href="MP_F767ZI_network_samples_md.html">
            
                    
                    MP_F767ZI_network_samples
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >st-flash</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p>2022/1/6<br>&#x521D;&#x7248;</p>
<p>st-flash&#x6700;&#x65B0;&#x7248;&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;  </p>
<h1 id="st-flash&#x6700;&#x65B0;&#x7248;&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;">st-flash&#x6700;&#x65B0;&#x7248;&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;</h1>
<h2 id="&#x6982;&#x8981;">&#x6982;&#x8981;</h2>
<p>STM32&#x30DC;&#x30FC;&#x30C9;&#x306E;&#x66F8;&#x304D;&#x8FBC;&#x307F;&#x30C4;&#x30FC;&#x30EB;&#x3067;&#x3042;&#x308B;st-flash(ST-Link utilities)&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;&#x306B;&#x3064;&#x3044;&#x3066;&#x8A18;&#x3059;&#x308B;&#x3002;</p>
<h2 id="&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;">&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;</h2>
<p>&#x4EE5;&#x4E0B;&#x306E;&#x624B;&#x9806;&#x3067;&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;&#x3059;&#x308B;&#xFF1A;</p>
<pre><code class="lang-bash">
<span class="hljs-comment"># &#x95A2;&#x9023;&#x30E9;&#x30A4;&#x30D6;&#x30E9;&#x30EA;&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;</span>
sudo apt install git make cmake libusb-1.0-0-dev
sudo apt install gcc build-essential

<span class="hljs-built_in">cd</span> ~/tools
<span class="hljs-comment"># &#x30BD;&#x30FC;&#x30B9;&#x306E;&#x30C0;&#x30A6;&#x30F3;&#x30ED;&#x30FC;&#x30C9;</span>
git <span class="hljs-built_in">clone</span> https://github.com/stlink-org/stlink
<span class="hljs-built_in">cd</span> stlink
<span class="hljs-comment"># &#x30D3;&#x30EB;&#x30C9;</span>
cmake .
make

<span class="hljs-comment"># &#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;(&#x95A2;&#x9023;&#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x30B3;&#x30D4;&#x30FC;)</span>
<span class="hljs-built_in">cd</span> bin
sudo cp st-* /usr/<span class="hljs-built_in">local</span>/bin
<span class="hljs-built_in">cd</span> ../lib
sudo cp *.so* /lib32

<span class="hljs-built_in">cd</span> ..
sudo mkdir /usr/<span class="hljs-built_in">local</span>/stlink/chips
sudo cp config/chips/*.* /usr/<span class="hljs-built_in">local</span>/stlink/chips/

<span class="hljs-comment"># udev&#x767B;&#x9332;</span>
sudo cp config/udev/rules.d/49-stlinkv* /etc/udev/rules.d/
</code></pre>
<h2 id="&#x52D5;&#x4F5C;&#x78BA;&#x8A8D;">&#x52D5;&#x4F5C;&#x78BA;&#x8A8D;</h2>
<pre><code class="lang-baash">
# &#x63A5;&#x7D9A;&#x78BA;&#x8A8D;
$ lsusb
&#xFF1C;&#x7701;&#x7565;&#xFF1E;
Bus 001 Device 021: ID 0483:374b STMicroelectronics ST-LINK/V2.1
&#xFF1C;&#x7701;&#x7565;&#xFF1E;
#&#x300C;ST-LINK/V2.x&#x300D;&#x304C;&#x3042;&#x308B;&#x3053;&#x3068;&#x3092;&#x78BA;&#x8A8D;&#x3059;&#x308B;

$ st-info --probe
Found 1 stlink programmers
  version:    V2J37S26
  serial:     066FFF525254667867254217
  flash:      0 (pagesize: 0)
  sram:       0
  chipid:     0x0000
  descr:      unknown device
# &#x300C;Found&#x300D;&#x304C;&#x3042;&#x308B;&#x3053;&#x3068;&#x3092;&#x78BA;&#x8A8D;&#x3059;&#x308B;

$ st-flash read dummy.bin 0 0xFFFF
st-flash 1.7.0-129-g7cc1fda
---------- old ------------
# Chip-ID file for F1xx Medium-density
#
chip_id 0x410
description F1xx Medium-density
flash_type  1
flash_size_reg 0x1ffff7e0
flash_pagesize 0x400
sram_size 0x5000
bootrom_base 0x1ffff000
bootrom_size 0x800
option_base 0x1ffff800
option_size 0x10
flags 2

---------- new ------------
# Chip-ID file for F1xx Medium-density
#
chip_id 0x410
description F1xx Medium-density
flash_type  1
flash_size_reg 0x0
flash_pagesize 0x400
sram_size 0x5000
bootrom_base 0x1ffff000
bootrom_size 0x800
option_base 0x1ffff800
option_size 0x10
flags 2

2022-01-05T22:52:18 INFO common.c: F1xx Medium-density: 20 KiB SRAM, 20480 KiB flash in at least 1 KiB pages.
2022-01-05T22:52:18 INFO common.c: read from address 0000000000 size 65535
#----------------------------

# ST-LINK&#x304C;&#x6545;&#x969C;&#x3057;&#x3066;&#x3044;&#x308B;&#x5834;&#x5408;
$ st-flash read dummy.bin 0 0xFFFF
st-flash 1.7.0-129-g7cc1fda
2022-01-05T22:54:34 ERROR common.c: Can not connect to target. Please use &apos;connect under reset&apos; and try again
Failed to connect to target
</code></pre>
<h2 id="&#x66F8;&#x304D;&#x8FBC;&#x307F;&#x4F8B;">&#x66F8;&#x304D;&#x8FBC;&#x307F;&#x4F8B;</h2>
<pre><code class="lang-bash">
$ st-flash write .pio/build/genericSTM32F103CB/firmware.bin 0x8000000
st-flash 1.7.0-129-g7cc1fda
---------- old ------------
<span class="hljs-comment"># Chip-ID file for F1xx Medium-density</span>
<span class="hljs-comment">#</span>
chip_id 0x410
description F1xx Medium-density
flash_<span class="hljs-built_in">type</span>  1
flash_size_reg 0x1ffff7e0
flash_pagesize 0x400
sram_size 0x5000
bootrom_base 0x1ffff000
bootrom_size 0x800
option_base 0x1ffff800
option_size 0x10
flags 2

---------- new ------------
<span class="hljs-comment"># Chip-ID file for F1xx Medium-density</span>
<span class="hljs-comment">#</span>
chip_id 0x410
description F1xx Medium-density
flash_<span class="hljs-built_in">type</span>  1
flash_size_reg 0x0
flash_pagesize 0x400
sram_size 0x5000
bootrom_base 0x1ffff000
bootrom_size 0x800
option_base 0x1ffff800
option_size 0x10
flags 2

2022-01-05T23:09:41 INFO common.c: F1xx Medium-density: 20 KiB SRAM, 20480 KiB flash <span class="hljs-keyword">in</span> at least 1 KiB pages.
file .pio/build/genericSTM32F103CB/firmware.bin md5 checksum: 59c52632cb2245<span class="hljs-built_in">cd</span>66935cc258da5c, stlink checksum: 0x000f54bd
2022-01-05T23:09:41 INFO common.c: Attempting to write 10268 (0x281c) bytes to stm32 address: 134217728 (0x8000000)
2022-01-05T23:09:41 INFO common.c: Flash page at addr: 0x08000000 erased
2022-01-05T23:09:41 INFO common.c: Flash page at addr: 0x08000400 erased
2022-01-05T23:09:41 INFO common.c: Flash page at addr: 0x08000800 erased
2022-01-05T23:09:41 INFO common.c: Flash page at addr: 0x08000c00 erased
2022-01-05T23:09:41 INFO common.c: Flash page at addr: 0x08001000 erased
2022-01-05T23:09:41 INFO common.c: Flash page at addr: 0x08001400 erased
2022-01-05T23:09:41 INFO common.c: Flash page at addr: 0x08001800 erased
2022-01-05T23:09:41 INFO common.c: Flash page at addr: 0x08001c00 erased
2022-01-05T23:09:41 INFO common.c: Flash page at addr: 0x08002000 erased
2022-01-05T23:09:41 INFO common.c: Flash page at addr: 0x08002400 erased
2022-01-05T23:09:41 INFO common.c: Flash page at addr: 0x08002800 erased
2022-01-05T23:09:41 INFO common.c: Finished erasing 11 pages of 1024 (0x400) bytes
2022-01-05T23:09:41 INFO common.c: Starting Flash write <span class="hljs-keyword">for</span> VL/F0/F3/F1_XL
2022-01-05T23:09:41 INFO flash_loader.c: Successfully loaded flash loader <span class="hljs-keyword">in</span> sram
2022-01-05T23:09:41 INFO flash_loader.c: Clear DFSR
 11/ 11 pages written
2022-01-05T23:09:42 INFO common.c: Starting verification of write complete
2022-01-05T23:09:42 INFO common.c: Flash written and verified! jolly good!
</code></pre>
<h2 id="&#x53C2;&#x8003;&#x8CC7;&#x6599;">&#x53C2;&#x8003;&#x8CC7;&#x6599;</h2>
<p><a href="https://freeelectron.ro/installing-st-link-v2-to-flash-stm32-targets-on-linux/" target="_blank">Installing ST-Link v2 to flash STM32 targets on Linux</a><br><a href="http://nopnop2002.webcrow.jp/NUTTX-STM32F3/NUTTX-Nucleo-STlink.html" target="_blank">Nucleo&#x306E;ST-Link&#x3092;&#x4F7F;&#x3063;&#x305F;Firmware&#x66F8;&#x304D;&#x8FBC;&#x307F;</a><br><a href="https://github.com/stlink-org/stlink/blob/develop/doc/tutorial.md" target="_blank">stlink Tools Tutorial</a><br><a href="https://stackoverflow.com/questions/63011922/flash-a-st-board-with-stlink-and-linux" target="_blank">flash a ST board with STLINK and Linux</a>  </p>
<p>&#x4EE5;&#x4E0A;</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="gcc-arm-none-eabi_latest_install_md.html" class="navigation navigation-prev " aria-label="Previous page: gcc-arm-none-eabi">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="newuser_pio.html" class="navigation navigation-next " aria-label="Next page: newuser_pio">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"st-flash","level":"2.3","depth":1,"next":{"title":"newuser_pio","level":"3.1","depth":1,"path":"md/newuser_pio.md","ref":"md/newuser_pio.md","articles":[]},"previous":{"title":"gcc-arm-none-eabi","level":"2.2","depth":1,"path":"md/gcc-arm-none-eabi_latest_install_md.md","ref":"md/gcc-arm-none-eabi_latest_install_md.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["sequence","flowchart","uml"],"pluginsConfig":{"sequence":{"theme":"simple"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"flowchart":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"uml":{"format":"svg"},"mathjax":{"forceSVG":true},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"./styles/site.scss","pdf":"./styles/pdf.scss"}},"file":{"path":"md/st-flash_latest_install_md.md","mtime":"2022-02-11T08:14:13.055Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-02-13T23:52:36.524Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

